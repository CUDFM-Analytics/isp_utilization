1                                                          The SAS System                             11:11 Tuesday, August 29, 2023

NOTE: Unable to open SASUSER.REGSTRY. WORK.REGSTRY will be opened instead.
NOTE: All registry changes will be lost at the end of the session.

WARNING: Unable to copy SASUSER registry to WORK registry. Because of this, you will not see registry customizations during this 
         session.
NOTE: Unable to open SASUSER.PROFILE. WORK.PROFILE will be opened instead.
NOTE: All profile changes will be lost at the end of the session.
NOTE: Copyright (c) 2016 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M7) 
      Licensed to UNIVERSITY OF COLORADO SYSTEM - SFA - T&R, Site 70082279.
NOTE: This session is executing on the X64_10PRO  platform.



NOTE: Analytical products:
      
      SAS/STAT 15.2
      SAS/ETS 15.2
      SAS/OR 15.2
      SAS/IML 15.2
      SAS/QC 15.2

NOTE: Additional host information:

 X64_10PRO WIN 10.0.19041  Workstation

NOTE: SAS initialization used:
      real time           0.30 seconds
      cpu time            0.31 seconds
      
1          *****************************************************************************************
1        ! *****
2          AUTHOR   : Carter Sevick, adapted for ISP by KW
3          PROJECT  : ISP
4          PURPOSE  : define the bootstrap process to parallelize
5          VERSION  : 2023-08-24
6          HISTORY  : copied on 08-24-2023 from Carter/Examples/boot total cost/
7          CHANGES  : -moved projRoot, libname in, libname out to config_boot
8          *****************************************************************************************
8        ! ******
9          
10         STEPS:
11         1. Change macro value for indicators: ind_cost, cost (rows 15:16)
12         2. change out for each DV??
13         ;
14         
15         %INCLUDE
15       ! "S:/FHPC/DATA/HCPF_DATA_files_SECURE/Kim/isp/isp_utilization/code/util_bootstrap/00_confi
15       ! g_boot.sas";
NOTE: Libref IN was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: S:\FHPC\DATA\HCPF_DATA_files_SECURE\Kim\isp\isp_utilization\data
NOTE: Libref OUT was successfully assigned as follows: 
      Engine:        V9 
2                                          The SAS System             11:11 Tuesday, August 29, 2023

      Physical Name: S:\FHPC\DATA\HCPF_DATA_files_SECURE\Kim\isp\isp_utilization\data_boot_processed
33         libname out "&projRoot\data_boot_processed";
NOTE: Libref OUT was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: S:\FHPC\DATA\HCPF_DATA_files_SECURE\Kim\isp\isp_utilization\data_boot_processed
34         
35         * macro programs;
36         %LET ind_cost = ind_pc_cost;
37         %LET cost     = adj_pd_pc_tc;
38         
39         * INCLUDE macro;
40         %INCLUDE "&projRoot\code\util_bootstrap\macro_resample_V4.sas";
147        * get process parameters ;
148        ** process number ;
149        %LET   i = %scan(&SYSPARM,1,%str( ));
150        ** seed number ;
151        %LET   seed = %scan(&SYSPARM,2,%str( ));
152        ** N bootstrap samples ;
153        %LET    N = %scan(&SYSPARM,3,%str( ));
154        
155        * Draw bootstrap samples
156        Two new variables are added
157        1) bootUnit = the new subject identifier
158        2) replicate = identifies specific bootstrap samples
159        !!!!! the old ID variable is still included, BUT YOU CAN NOT USE IT IN THIS DATA FOR
159      ! STATISTICS!!!!!!!!!!!;
160        ODS SELECT NONE;
161        %resample(data= &data
162                , out=_resample_out_
163                , subject=mcaid_id
164                , reps= &N
165                , strata=int
166                , seed=&seed
167                , bootUnit=bootUnit
168                , repName = replicate
169                , samprate = (1 .20)
170        );

NOTE: There were 500000 observations read from the data set IN.MINI.
NOTE: 73836 observations with duplicate key values were deleted.
NOTE: The data set WORK._DEDUP_ has 426164 observations and 2 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           2.01 seconds
      cpu time            0.28 seconds
      


NOTE: The data set WORK._RESAMPLE_OUT__TMP has 22570273 observations and 6 variables.
NOTE: PROCEDURE SURVEYSELECT used (Total process time):
      real time           5.87 seconds
      cpu time            5.81 seconds
      


3                                          The SAS System             11:11 Tuesday, August 29, 2023

NOTE: There were 22570273 observations read from the data set WORK._RESAMPLE_OUT__TMP.
NOTE: The data set WORK._RESAMPLE_OUT__TMP has 22570273 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           15.10 seconds
      cpu time            15.70 seconds
      


NOTE: There were 22570273 observations read from the data set WORK._RESAMPLE_OUT__TMP.
NOTE: The data set WORK._RESAMPLE_OUT__TMP has 22570273 observations and 7 variables.
NOTE: DATA statement used (Total process time):
      real time           4.85 seconds
      cpu time            4.00 seconds
      

NOTE: Table WORK._RESAMPLE_OUT_ created, with 26546376 rows and 47 columns.

NOTE: PROCEDURE SQL used (Total process time):
      real time           2:05.99
      cpu time            54.28 seconds
      


NOTE: Deleting WORK._DEDUP_ (memtype=DATA).
NOTE: Deleting WORK._RESAMPLE_OUT__TMP (memtype=DATA).

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.15 seconds
      cpu time            0.15 seconds
      

171        
172        * save a copy of the booted data ;
173        DATA out._resample_out_&i;
174        SET _resample_out_;
175        RUN;

NOTE: There were 26546376 observations read from the data set WORK._RESAMPLE_OUT_.
NOTE: The data set OUT._RESAMPLE_OUT_8 has 26546376 observations and 47 variables.
NOTE: DATA statement used (Total process time):
      real time           10:41.31
      cpu time            22.92 seconds
      

176        
177        * run models and output store objects ;
178        
179        * probability model
180        QUESTIONS why isn't pvar in the class statement? What happens to mcaid_id in class but
180      ! not model?;
181        ODS SELECT NONE;
182        OPTIONS NONOTES;
183        PROC GENMOD DATA = _resample_out_ desc;
184           BY    replicate;
4                                          The SAS System             11:11 Tuesday, August 29, 2023

185           CLASS bootunit mcaid_id int (ref='0') int_imp (ref='0') budget_grp_new (ref='MAGI
185      ! Eligible Children')
186                 race (ref='non-Hispanic White/Caucasian') sex (ref='Female') rae_person_new
186      ! (ref='3') age_cat(ref='6') fqhc(ref ='0')
187                 bh_oth16 (ref='0') bh_oth17 (ref='0') bh_oth18 (ref='0') bh_er16 (ref='0')
187      ! bh_er17 (ref='0') bh_er18 (ref='0')
188                 bh_hosp16(ref='0') bh_hosp17(ref='0') bh_hosp18(ref='0')
189                 adj_pd_total_16cat(ref='0') adj_pd_total_17cat(ref='0')
189      ! adj_pd_total_18cat(ref='0');
190           MODEL &ind_cost(event="1") = int int_imp budget_grp_new race sex rae_person_new
190      ! age_cat fqhc
191                                     bh_oth16 bh_oth17 bh_oth18 bh_er16 bh_er17 bh_er18 bh_hosp16
191      !  bh_hosp17 bh_hosp18
192                                     adj_pd_total_16cat adj_pd_total_17catadj_pd_total_18cat /
ERROR: Variable adj_pd_total_17catadj_pd_total_1 not found.
193                 DIST=binomial LINK=logit;
194           REPEATED SUBJECT = bootunit;
195           STORE out.prob_stored_&i;
196        RUN;
197        ODS SELECT ALL;
198        OPTIONS NOTES;
199        
200        * cost model ;
201        ODS SELECT NONE;
202        OPTIONS NONOTES;
203        PROC GENMOD DATA = _resample_out_  ;
204           BY    replicate;
205           WHERE &cost >0;
206           CLASS bootunit mcaid_id int (ref='0') int_imp (ref='0') budget_grp_new (ref='MAGI
206      ! Eligible Children')
207                 race (ref='non-Hispanic White/Caucasian') sex (ref='Female') rae_person_new
207      ! (ref='3') age_cat(ref='6') fqhc(ref ='0')
208                 bh_oth16 (ref='0') bh_oth17 (ref='0') bh_oth18 (ref='0') bh_er16 (ref='0')
208      ! bh_er17 (ref='0') bh_er18 (ref='0')
209                 bh_hosp16(ref='0') bh_hosp17(ref='0') bh_hosp18(ref='0')
210                 adj_pd_total_16cat(ref='0') adj_pd_total_17cat(ref='0')
210      ! adj_pd_total_18cat(ref='0');
211           MODEL &cost = int int_imp budget_grp_new race sex rae_person_new age_cat fqhc
212                                     bh_oth16 bh_oth17 bh_oth18 bh_er16 bh_er17 bh_er18 bh_hosp16
212      !  bh_hosp17 bh_hosp18
213                                     adj_pd_total_16cat adj_pd_total_17catadj_pd_total_18cat /
ERROR: Variable adj_pd_total_17catadj_pd_total_1 not found.
214                 DIST = gamma LINK = log;
215           REPEATED SUBJECT = bootunit;
216           STORE out.cost_stored_&i;
217        RUN;
218        ODS SELECT ALL;
219        OPTIONS NOTES;


ERROR: Errors printed on page 4.

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
5                                          The SAS System             11:11 Tuesday, August 29, 2023

      real time           13:15.77
      cpu time            1:43.56
      
