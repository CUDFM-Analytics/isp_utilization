NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

147  ODS PDF FILE     ="&pdf"; RUN;
SYMBOLGEN:  Macro variable PDF resolves to 
            S:/FHPC/DATA/HCPF_DATA_files_SECURE/Kim/isp/isp_utilization/code/util_avp_cost_total_.pd
            f
NOTE: Writing ODS PDF output to DISK destination 
      "S:\FHPC\DATA\HCPF_DATA_files_SECURE\Kim\isp\isp_utilization\code\util_avp_cost_total_.pdf", 
      printer "PDF".
148  
149  TITLE "Probability Model: FFS Total Cost";
150  PROC GEE DATA  = &dat DESC;
SYMBOLGEN:  Macro variable DAT resolves to data.analysis
151  CLASS  mcaid_id
152         season1(ref='-1')    season2(ref='-1')     season3(ref='-1')
153         int    (ref= '0')    int_imp(ref= '0')
154         age    (ref= '1')    race                  sex
155         budget_group         fqhc(ref= '0')        rae_person_new
156         bh_hosp16(ref= '0')  bh_hosp17(ref= '0')   bh_hosp18(ref= '0')
157         bh_er16  (ref= '0')  bh_er16  (ref= '0')   bh_er16  (ref= '0')
158         bh_oth16 (ref= '0')  bh_oth17 (ref= '0')   bh_oth17 (ref= '0')
159         adj_pd_total_16cat(ref='-1')
160         adj_pd_total_17cat(ref='-1')
161         adj_pd_total_18cat(ref='-1')
162         ind_total_cost       (ref= '0') ;
163  MODEL  ind_total_cost = time       season1    season2     season3
164                          int        int_imp
165                          age        race        sex
166                          budget_group           fqhc       rae_person_new
167                          bh_er16    bh_er17     bh_er18
168                          bh_hosp16  bh_hosp17   bh_hosp18
169                          bh_oth16   bh_oth17    bh_oth18
170                          adj_pd_total_16cat
171                          adj_pd_total_17cat
172                          adj_pd_total_18cat
173          / DIST=binomial LINK=logit ;
174  REPEATED SUBJECT = mcaid_id / type=exch ;
175  store p_MODEL;
176  run;

NOTE: Class levels for some variables were not printed due to excessive size.
NOTE: PROC GEE is modeling the probability that ind_total_cost='1'.
NOTE: The GEE procedure generated the model item store WORK.P_MODEL.
NOTE: PROCEDURE GEE used (Total process time):
      real time           11:37.54
      cpu time            10:58.54
      

177  
178  * positive cost model ;
179  TITLE "Cost Model: total";
180  PROC GEE DATA  = &dat desc;
SYMBOLGEN:  Macro variable DAT resolves to data.analysis
181  WHERE adj_pd_total_tc > 0;
182  CLASS mcaid_id
183        season1(ref='-1')    season2(ref='-1')     season3(ref='-1')
184        int    (ref= '0')    int_imp(ref= '0')
185        age    (ref= '1')    race                  sex
186        budget_group         fqhc(ref= '0')        rae_person_new
187        bh_hosp16(ref= '0')  bh_hosp17(ref= '0')   bh_hosp18(ref= '0')
188        bh_er16  (ref= '0')  bh_er16  (ref= '0')   bh_er16  (ref= '0')
189        bh_oth16 (ref= '0')  bh_oth17 (ref= '0')   bh_oth17 (ref= '0')
190        adj_pd_total_16cat(ref='-1')
191        adj_pd_total_17cat(ref='-1')
192        adj_pd_total_18cat(ref='-1');
193  
194  MODEL adj_pd_total_tc = time       season1    season2     season3
195                          int        int_imp
196                          age        race        sex
197                          budget_group           fqhc       rae_person_new
198                          bh_er16    bh_er17     bh_er18
199                          bh_hosp16  bh_hosp17   bh_hosp18
200                          bh_oth16   bh_oth17    bh_oth18
201                          adj_pd_total_16cat
202                          adj_pd_total_17cat
203                          adj_pd_total_18cat     / dist = gamma link = log ;
204  REPEATED SUBJECT = mcaid_id / type = exch;
205  store c_model;
206  RUN;

NOTE: Class levels for some variables were not printed due to excessive size.
NOTE: The GEE procedure generated the model item store WORK.C_MODEL.
NOTE: PROCEDURE GEE used (Total process time):
      real time           11:19.92
      cpu time            11:19.79
      

207  TITLE;
208  
209  * interest group ;
210  * the group of interest (emancipated youth) is set twice,
211    the top in the stack will be recoded as not emancipated (unexposed)
212    the bottom group keeps the emancipated status;
213  
214  data intgroup;
SYMBOLGEN:  Macro variable DAT resolves to data.analysis
215    set &dat &dat (in = b);
SYMBOLGEN:  Macro variable DAT resolves to data.analysis
216    where int = 1;
217    if ^b then int = 0;
218    exposed = b;
219  run;

NOTE: There were 1751759 observations read from the data set DATA.ANALYSIS.
      WHERE int=1;
NOTE: There were 1751759 observations read from the data set DATA.ANALYSIS.
      WHERE int=1;
NOTE: The data set WORK.INTGROUP has 3503518 observations and 41 variables.
NOTE: DATA statement used (Total process time):
      real time           3.31 seconds
      cpu time            3.15 seconds
      

220  
221  * the predictions for util and cost will be made for each person twice, once exposed and once
221! unexposed;
222  
223  * prob of util ;
224  proc plm restore=p_model;
225     score data=intgroup out=p_intgroup predicted=p_prob / ilink;
226  run;

NOTE: The data set WORK.P_INTGROUP has 3503518 observations and 42 variables.
NOTE: PROCEDURE PLM used (Total process time):
      real time           7.97 seconds
      cpu time            7.93 seconds
      

227  
228  * prob of cost ;
229  proc plm restore=c_model;
230     score data=p_intgroup out=cp_intgroup predicted=p_cost / ilink;
231  run;

NOTE: The data set WORK.CP_INTGROUP has 3503518 observations and 43 variables.
NOTE: PROCEDURE PLM used (Total process time):
      real time           8.23 seconds
      cpu time            8.21 seconds
      

232  
233  * person average cost is calculated ;
234  data out.meanCost_total;
235    set cp_intgroup;
236    a_cost = p_prob*p_cost;* (1-p term = 0);
237  run;

NOTE: There were 3503518 observations read from the data set WORK.CP_INTGROUP.
NOTE: The data set OUT.MEANCOST_TOTAL has 3503518 observations and 44 variables.
NOTE: DATA statement used (Total process time):
      real time           17.02 seconds
      cpu time            1.42 seconds
      

238  
239  * group average cost is calculated and contrasted ;
240  proc sql;
241  create table out.avp_cost_total as
242    select mean(case when exposed=1 then a_cost else . end ) as cost_exposed,
243           mean(case when exposed=0 then a_cost else . end ) as cost_unexposed,
244    calculated cost_exposed - calculated cost_unexposed as cost_diff
245    from out.meanCost_total;
NOTE: Table OUT.AVP_COST_TOTAL created, with 1 rows and 3 columns.

246  quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           11.37 seconds
      cpu time            0.34 seconds
      

247  
248  TITLE "avp_cost_total";
249  proc print data = out.avp_cost_total;
250  run;

NOTE: There were 1 observations read from the data set OUT.AVP_COST_TOTAL.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

251  
252  proc means data = out.meancost_total;
253  by exposed;
254  var p_prob p_cost a_cost;
255  RUN;

NOTE: There were 3503518 observations read from the data set OUT.MEANCOST_TOTAL.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           1.34 seconds
      cpu time            1.31 seconds
      

256  
257  PROC PRINTTO; RUN;

