NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

141  ODS PDF FILE ="&pdf"; RUN;
SYMBOLGEN:  Macro variable PDF resolves to 
            S:/FHPC/DATA/HCPF_DATA_files_SECURE/Kim/isp/isp_utilization/code/util_avp_cost_pc.pdf
NOTE: Writing ODS PDF output to DISK destination 
      "S:\FHPC\DATA\HCPF_DATA_files_SECURE\Kim\isp\isp_utilization\code\util_avp_cost_pc.pdf", 
      printer "PDF".
142  
143  TITLE "Probability Model: PC Cost";
144  PROC GEE DATA  = &dat DESC;
SYMBOLGEN:  Macro variable DAT resolves to data.analysis
145  CLASS  mcaid_id
146         season1(ref='-1')    season2(ref='-1')     season3(ref='-1')
147         int    (ref= '0')    int_imp(ref= '0')
148         age    (ref= '1')    race                  sex
149         budget_group         fqhc(ref= '0')        rae_person_new
150         bh_hosp16(ref= '0')  bh_hosp17(ref= '0')   bh_hosp18(ref= '0')
151         bh_er16  (ref= '0')  bh_er16  (ref= '0')   bh_er16  (ref= '0')
152         bh_oth16 (ref= '0')  bh_oth17 (ref= '0')   bh_oth17 (ref= '0')
153         adj_pd_total_16cat(ref='-1')
154         adj_pd_total_17cat(ref='-1')
155         adj_pd_total_18cat(ref='-1')
156         ind_pc_cost       (ref= '0');
157  MODEL  ind_pc_cost = time       season1    season2     season3
158                       int        int_imp
159                       age        race        sex
160                       budget_group           fqhc       rae_person_new
161                       bh_er16    bh_er17     bh_er18
162                       bh_hosp16  bh_hosp17   bh_hosp18
163                       bh_oth16   bh_oth17    bh_oth18
164                       adj_pd_total_16cat
165                       adj_pd_total_17cat
166                       adj_pd_total_18cat
167          / DIST=binomial LINK=logit ;
168  REPEATED SUBJECT = mcaid_id / type=exch ;
169  store p_MODEL;
170  run;

NOTE: Class levels for some variables were not printed due to excessive size.
NOTE: PROC GEE is modeling the probability that ind_pc_cost='1'.
NOTE: The GEE procedure generated the model item store WORK.P_MODEL.
NOTE: PROCEDURE GEE used (Total process time):
      real time           11:40.03
      cpu time            10:59.37
      

171  
172  * positive cost model ;
173  TITLE "Cost Model: PC";
174  PROC GEE DATA  = &dat desc;
SYMBOLGEN:  Macro variable DAT resolves to data.analysis
175  WHERE adj_pd_pc_tc > 0;
176  CLASS mcaid_id
177        season1(ref='-1')    season2(ref='-1')     season3(ref='-1')
178        int    (ref= '0')    int_imp(ref= '0')
179        age    (ref= '1')    race                  sex
180        budget_group         fqhc(ref= '0')        rae_person_new
181        bh_hosp16(ref= '0')  bh_hosp17(ref= '0')   bh_hosp18(ref= '0')
182        bh_er16  (ref= '0')  bh_er16  (ref= '0')   bh_er16  (ref= '0')
183        bh_oth16 (ref= '0')  bh_oth17 (ref= '0')   bh_oth17 (ref= '0')
184        adj_pd_total_16cat(ref='-1')
185        adj_pd_total_17cat(ref='-1')
186        adj_pd_total_18cat(ref='-1');
187  
188  MODEL adj_pd_pc_tc = time       season1    season2     season3
189                       int        int_imp
190                       age        race        sex
191                       budget_group           fqhc       rae_person_new
192                       bh_er16    bh_er17     bh_er18
193                       bh_hosp16  bh_hosp17   bh_hosp18
194                       bh_oth16   bh_oth17    bh_oth18
195                       adj_pd_total_16cat
196                       adj_pd_total_17cat
197                       adj_pd_total_18cat     / dist = gamma link = log ;
198  REPEATED SUBJECT = mcaid_id / type = exch;
199  store c_model;
200  RUN;

NOTE: Class levels for some variables were not printed due to excessive size.
NOTE: The GEE procedure generated the model item store WORK.C_MODEL.
NOTE: PROCEDURE GEE used (Total process time):
      real time           6:25.98
      cpu time            6:25.93
      

201  TITLE;
202  
203  * interest group ;
204  * the group of interest (emancipated youth) is set twice,
205    the top in the stack will be recoded as not emancipated (unexposed)
206    the bottom group keeps the emancipated status;
207  
208  data intgroup;
SYMBOLGEN:  Macro variable DAT resolves to data.analysis
209    set &dat &dat (in = b);
SYMBOLGEN:  Macro variable DAT resolves to data.analysis
210    where int = 1;
211    if ^b then int = 0;
212    exposed = b;
213  run;

NOTE: There were 1751759 observations read from the data set DATA.ANALYSIS.
      WHERE int=1;
NOTE: There were 1751759 observations read from the data set DATA.ANALYSIS.
      WHERE int=1;
NOTE: The data set WORK.INTGROUP has 3503518 observations and 41 variables.
NOTE: DATA statement used (Total process time):
      real time           3.27 seconds
      cpu time            3.25 seconds
      

214  *  1785893 for both with intgroup = 3571786;
215  
216  * the predictions for util and cost will be made for each person twice, once exposed and once
216! unexposed;
217  
218  * prob of util ;
219  proc plm restore=p_model;
220     score data=intgroup out=p_intgroup predicted=p_prob / ilink;
221  run;

NOTE: The data set WORK.P_INTGROUP has 3503518 observations and 42 variables.
NOTE: PROCEDURE PLM used (Total process time):
      real time           8.53 seconds
      cpu time            8.53 seconds
      

222  
223  * prob of cost ;
224  proc plm restore=c_model;
225     score data=p_intgroup out=cp_intgroup predicted=p_cost / ilink;
226  run;

NOTE: The data set WORK.CP_INTGROUP has 3503518 observations and 43 variables.
NOTE: PROCEDURE PLM used (Total process time):
      real time           8.04 seconds
      cpu time            8.04 seconds
      

227  
228  * person average cost is calculated ;
229  data meanCost;
230    set cp_intgroup;
231    a_cost = p_prob*p_cost;* (1-p term = 0);
232  run;

NOTE: There were 3503518 observations read from the data set WORK.CP_INTGROUP.
NOTE: The data set WORK.MEANCOST has 3503518 observations and 44 variables.
NOTE: DATA statement used (Total process time):
      real time           0.93 seconds
      cpu time            0.92 seconds
      

233  
234  * group average cost is calculated and contrasted ;
235  proc sql;
236  
237  create table avp_cost_pc as
238    select mean(case when exposed=1 then a_cost else . end ) as cost_exposed,
239           mean(case when exposed=0 then a_cost else . end ) as cost_unexposed,
240    calculated cost_exposed - calculated cost_unexposed as cost_diff
241    from meanCost;
NOTE: Table WORK.AVP_COST_PC created, with 1 rows and 3 columns.

242  
243  quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.59 seconds
      cpu time            0.59 seconds
      

244  
245  TITLE "avp_cost_pc";
246  proc print data = avp_cost_pc;
247  run;

NOTE: There were 1 observations read from the data set WORK.AVP_COST_PC.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

248  
249  proc means data = meancost;
250  by exposed;
251  var p_prob p_cost a_cost;
252  RUN;

NOTE: There were 3503518 observations read from the data set WORK.MEANCOST.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           1.39 seconds
      cpu time            1.37 seconds
      

253  
254  PROC PRINTTO; RUN;

