NOTE: PROCEDURE PRINTTO used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

984   ODS PDF FILE     = "&pdf" STARTPAGE = no;
NOTE: Writing ODS PDF output to DISK destination 
      "S:\FHPC\DATA\HCPF_Data_files_SECURE\Kim\isp\isp_utilization\reports\util_avp_cost
      _pc_2023-06-21.pdf", printer "PDF".
985   
986   Title &file;
987   
988   proc odstext;
989   p "Date: &today";
990   p "Root: &root";
991   p "Script: &file";
992   p "Log File: &log";
993   p "Results File: &pdf";
994   RUN;
NOTE: PROCEDURE ODSTEXT used (Total process time):
      real time           0.05 seconds
      cpu time            0.01 seconds
      

995   
996   %LET dat  = data.analysis;
997   %LET pvar = ind_pc_cost;
998   %LET cvar = adj_pd_pc_tc;
999   
1000  PROC PRINT DATA = data.analysis_meta; RUN;

NOTE: There were 50 observations read from the data set DATA.ANALYSIS_META.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.07 seconds
      cpu time            0.01 seconds
      

1001  
1002  TITLE "Probability Model: PC Cost";
1003  PROC GEE DATA  = &dat DESC;
1004  CLASS  mcaid_id int(ref="0") int_imp(ref="0") budget_grp_num_r
1005               race sex rae_person_new age_cat_num fqhc(ref ="0")
1006               bh_oth16(ref="0")      bh_oth17(ref="0")       bh_oth18(ref="0")
1007               bh_er16(ref="0")       bh_er17(ref="0")        bh_er18(ref="0")
1008               bh_hosp16(ref="0")     bh_hosp17(ref="0")      bh_hosp18(ref="0")
1009               adj_pd_total_16cat(ref="0")
1010               adj_pd_total_17cat(ref="0")
1011               adj_pd_total_18cat(ref="0")
1012         ind_pc_cost(ref= "0") ;
1013  MODEL  ind_pc_cost = int int_imp time budget_grp_num_r race sex rae_person_new
1013! age_cat_num fqhc
1014               bh_oth16               bh_oth17                bh_oth18
1015               bh_er16                bh_er17                 bh_er18
1016               bh_hosp16              bh_hosp17               bh_hosp18
1017               adj_pd_total_16cat
1018               adj_pd_total_17cat
1019               adj_pd_total_18cat            / DIST=binomial LINK=logit ;
1020  REPEATED SUBJECT = mcaid_id / type=exch ;
1021  store p_MODEL;
1022  run;

NOTE: Class levels for some variables were not printed due to excessive size.
NOTE: PROC GEE is modeling the probability that ind_pc_cost='1'.
NOTE: The GEE procedure generated the model item store WORK.P_MODEL.
NOTE: PROCEDURE GEE used (Total process time):
      real time           11:12.78
      cpu time            10:16.98
      

1023  
1024  * positive cost model ;
1025  TITLE "Cost Model: PC";
1026  PROC GEE DATA  = &dat desc;
1027  WHERE adj_pd_pc_tc > 0;
1028  CLASS mcaid_id
1029        int(ref="0") int_imp(ref="0") budget_grp_num_r
1030        race sex rae_person_new age_cat_num fqhc(ref ="0")
1031        bh_oth16(ref="0")      bh_oth17(ref="0")       bh_oth18(ref="0")
1032        bh_er16(ref="0")       bh_er17(ref="0")        bh_er18(ref="0")
1033        bh_hosp16(ref="0")     bh_hosp17(ref="0")      bh_hosp18(ref="0")
1034        adj_pd_total_16cat(ref="0")
1035        adj_pd_total_17cat(ref="0")
1036        adj_pd_total_18cat(ref="0");
1037  MODEL adj_pd_pc_tc = time       season1    season2     season3
1038                       int        int_imp
1039                       age_cat_num        race    sex
1040                       budget_grp_num_r   fqhc    rae_person_new
1041                       bh_er16    bh_er17     bh_er18
1042                       bh_hosp16  bh_hosp17   bh_hosp18
1043                       bh_oth16   bh_oth17    bh_oth18
1044                       adj_pd_total_16cat
1045                       adj_pd_total_17cat
1046                       adj_pd_total_18cat     / dist = gamma link = log ;
1047  REPEATED SUBJECT = mcaid_id / type = exch;
1048  store c_model;
1049  RUN;

NOTE: Class levels for some variables were not printed due to excessive size.
NOTE: The GEE procedure generated the model item store WORK.C_MODEL.
NOTE: PROCEDURE GEE used (Total process time):
      real time           6:03.61
      cpu time            6:03.45
      

1050  TITLE;
1051  
1052  * interest group ;
1053  * the group of interest (emancipated youth) is set twice,
1054    the top in the stack will be recoded as not emancipated (unexposed)
1055    the bottom group keeps the emancipated status;
1056  
1057  data intgroup;
1058    set &dat &dat (in = b);
1059    where int = 1;
1060    if ^b then int = 0;
1061    exposed = b;
1062  run;

NOTE: There were 1893477 observations read from the data set DATA.ANALYSIS.
      WHERE int=1;
NOTE: There were 1893477 observations read from the data set DATA.ANALYSIS.
      WHERE int=1;
NOTE: The data set WORK.INTGROUP has 3786954 observations and 51 variables.
NOTE: DATA statement used (Total process time):
      real time           4.10 seconds
      cpu time            4.09 seconds
      

1063  
1064  * the predictions for util and cost will be made for each person twice, once
1064! exposed and once unexposed;
1065  
1066  * prob of util ;
1067  proc plm restore=p_model;
1068     score data=intgroup out=p_intgroup predicted=p_prob / ilink;
1069  run;

NOTE: The data set WORK.P_INTGROUP has 3786954 observations and 52 variables.
NOTE: PROCEDURE PLM used (Total process time):
      real time           8.42 seconds
      cpu time            8.40 seconds
      

1070  
1071  * prob of cost ;
1072  proc plm restore=c_model;
1073     score data=p_intgroup out=cp_intgroup predicted=p_cost / ilink;
1074  run;

NOTE: The data set WORK.CP_INTGROUP has 3786954 observations and 53 variables.
NOTE: PROCEDURE PLM used (Total process time):
      real time           8.08 seconds
      cpu time            8.09 seconds
      

1075  
1076  * person average cost is calculated ;
1077  data out.cost_pc_meanCost;
1078    set cp_intgroup;
1079    a_cost = p_prob*p_cost;* (1-p term = 0);
1080  run;

NOTE: There were 3786954 observations read from the data set WORK.CP_INTGROUP.
NOTE: The data set OUT.COST_PC_MEANCOST has 3786954 observations and 54 variables.
NOTE: DATA statement used (Total process time):
      real time           21.78 seconds
      cpu time            1.84 seconds
      

1081  
1082  * group average cost is calculated and contrasted ;
1083  proc sql;
1084  create table out.avp_cost_pc as
1085    select mean(case when exposed=1 then a_cost else . end ) as cost_exposed,
1086           mean(case when exposed=0 then a_cost else . end ) as cost_unexposed,
1087    calculated cost_exposed - calculated cost_unexposed as cost_diff
1088    from out.cost_pc_meanCost;
NOTE: Table OUT.AVP_COST_PC created, with 1 rows and 3 columns.

1089  quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           15.49 seconds
      cpu time            0.51 seconds
      

1090  
1091  TITLE "avp_cost_pc";
1092  proc print data = out.avp_cost_pc;
1093  run;

NOTE: There were 1 observations read from the data set OUT.AVP_COST_PC.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      

1094  
1095  proc means data = out.cost_pc_meancost;
1096  by exposed;
1097  var p_prob p_cost a_cost;
1098  RUN;

NOTE: There were 3786954 observations read from the data set OUT.COST_PC_MEANCOST.
NOTE: PROCEDURE MEANS used (Total process time):
      real time           1.46 seconds
      cpu time            1.43 seconds
      

1099  
1100  PROC PRINTTO; RUN;

